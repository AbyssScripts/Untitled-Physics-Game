local plr = game.Players.LocalPlayer

local Events = {
	DestroyToy = game.ReplicatedStorage.Menu.DestroyToy;
	SpawnToyRemoteFunction = game.ReplicatedStorage.Menu.SpawnToyRemoteFunction
}

local PreFunctions = {
	Destroy = function(Part)
		Events.DestroyToy:FireServer(Part)
	end,
	GetPlayers = function(Bool,Bool2)
		local List = {}
		for _, Player in ipairs(game.Players:GetPlayers()) do
			if Player == plr and Bool == true then
				if Bool2 == true then
					table.insert(List,Player.Name.."("..Player.DisplayName..")")
				else
					table.insert(List,Player.Name)
				end
			elseif Player ~= plr then
				if Bool2 == true then
					table.insert(List,Player.Name.."("..Player.DisplayName..")")
				else
					table.insert(List,Player.Name)
				end
			end
		end
		return List
	end,
	GetPlayerFromName = function(Text)
		for _, Player in ipairs(game.Players:GetPlayers()) do
			if Text == Player.Name.."("..Player.DisplayName..")" then
				return Player
			end
		end
		return nil
	end
}

local DropDownValues = {
	Target = {
		Player = ""
	};
	Server = {
		MapPart = "PlayGround"
	}
}

local SliderValues = {
	Player = {
		Speed = "16"
	};
}

local ToggleValues = {
	Player = {
		WalkSpeed = false
	};
	Immunity = {
		AntiGrab = false
	}
}

local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/RoyalNo0bs/OrionLib/refs/heads/main/Source",true))()
local Window = OrionLib:MakeWindow({Name = "Untitled Physics Game", HidePremium = false, SaveConfig = true, ConfigFolder = "Data", IntroText = "Untitled Physics Game"})

local PlayerTab = Window:MakeTab({
	Name = "Player",
	Icon = "rbxassetid://111710592722438",
	PremiumOnly = false
})

local ImmunityTab = Window:MakeTab({
	Name = "Immunity",
	Icon = "rbxassetid://111710592722438",
	PremiumOnly = false
})

local TargetTab = Window:MakeTab({
	Name = "Target",
	Icon = "rbxassetid://111710592722438",
	PremiumOnly = false
})

local ServerTab = Window:MakeTab({
	Name = "Server",
	Icon = "rbxassetid://111710592722438",
	PremiumOnly = false
})

local BetaTab = Window:MakeTab({
	Name = "BETA FEATURES",
	Icon = "rbxassetid://111710592722438",
	PremiumOnly = false
})

PlayerTab:AddToggle({
	Name = "WalkSpeed",
	Default = false,
	Callback = function(Value)
		ToggleValues.Player.WalkSpeed = Value
	end    
})

PlayerTab:AddSlider({
	Name = "Speed",
	Min = 16,
	Max = 200,
	Default = 16,
	Color = Color3.fromRGB(255, 255, 255),
	Increment = 1,
	ValueName = "Speed",
	Callback = function(Value)
		SliderValues.Player.Speed = Value
	end    
})

PlayerTab:AddToggle({
	Name = "Locked Camera",
	Default = true,
	Callback = function(Value)
		if Value then
			plr.CameraMaxZoomDistance = 0.5
			plr.CameraMode = Enum.CameraMode.LockFirstPerson
		else
			plr.CameraMaxZoomDistance = 1000000
			plr.CameraMode = Enum.CameraMode.Classic
		end
	end    
})

ImmunityTab:AddSection({Name = "Anti"})

ImmunityTab:AddToggle({
	Name = "Anti-Grab",
	Default = false,
	Callback = function(Value)
		ToggleValues.Immunity.AntiGrab = Value
		if ToggleValues.Immunity.AntiGrab == true then
			while ToggleValues.Immunity.AntiGrab == true do
				game.ReplicatedStorage.GrabEvents.SetOwnerNetwork:FireServer(game.Players.LocalPlayer.Character.Torso,game.Players.LocalPlayer.Character.Torso.CFrame)
				wait()
			end

		end
	end    
})

--TARGET TAB

local TargetList_Dropdown = TargetTab:AddDropdown({
	Name = "Target",
	Default = "...",
	Options = PreFunctions.GetPlayers(true,true),
	Callback = function(Value)
		if PreFunctions.GetPlayerFromName(Value) == nil then
			return
		end
		DropDownValues.Target.Player = PreFunctions.GetPlayerFromName(Value).Name
	end    
})

TargetTab:AddSection({Name = "Annoy"})

TargetTab:AddButton({	
	Name = "Disable Grab",
	Callback = function()
		if game.Players:FindFirstChild(DropDownValues.Target.Player) and game.Players:FindFirstChild(DropDownValues.Target.Player).Character then
			PreFunctions.Destroy(game.Players:FindFirstChild(DropDownValues.Target.Player).Character.GrabbingScript)  
		end
	end    
})

TargetTab:AddButton({	
	Name = "Kill",
	Callback = function()
		if game.Players:FindFirstChild(DropDownValues.Target.Player) and game.Players:FindFirstChild(DropDownValues.Target.Player).Character then
			PreFunctions.Destroy(game.Players:FindFirstChild(DropDownValues.Target.Player).Character.Torso)  
		end
	end    
})
TargetTab:AddButton({	
	Name = "Kick",
	Callback = function()
		if game.Players:FindFirstChild(DropDownValues.Target.Player) and game.Players:FindFirstChild(DropDownValues.Target.Player).Character then
			PreFunctions.Destroy(game.Players:FindFirstChild(DropDownValues.Target.Player))  
			OrionLib:MakeNotification({
				Name = "Kicked"..DropDownValues.Target.Player,
				Content = "This player was successfully kicked from the server",
				Image = "rbxassetid://11419701598",
				Time = 3
			})
		end
	end    
})

TargetTab:AddSection({Name = "Remove Items"})

TargetTab:AddButton({	
	Name = "Remove Accessories",
	Callback = function()
		local chr = nil
		if game.Players:FindFirstChild(DropDownValues.Target.Player) and game.Players:FindFirstChild(DropDownValues.Target.Player).Character then
			chr = game.Players:FindFirstChild(DropDownValues.Target.Player).Character
		end
		if chr then
			for _, Accessory in ipairs(chr:GetDescendants()) do
				if Accessory:IsA("Accessory") then
					PreFunctions.Destroy(Accessory)
				end
			end
		end
	end    
})

TargetTab:AddButton({	
	Name = "Remove Cloths",
	Callback = function()
		local chr = nil
		if game.Players:FindFirstChild(DropDownValues.Target.Player) and game.Players:FindFirstChild(DropDownValues.Target.Player).Character then
			chr = game.Players:FindFirstChild(DropDownValues.Target.Player).Character
		end
		if chr then
			for _, p in ipairs(chr:GetDescendants()) do
				if p:IsA("Pants") or p:IsA("Shirt") or p:IsA("ShirtGraphic") then
					PreFunctions.Destroy(p)
				end
			end
		end
	end    
})
TargetTab:AddButton({	
	Name = '<font color="#ffffff">Remove Character </font> <font color="#ff0000">[PERMAMANT]</font>',
	Callback = function()
		if game.Players:FindFirstChild(DropDownValues.Target.Player) and game.Players:FindFirstChild(DropDownValues.Target.Player).Character then
			PreFunctions.Destroy(game.Players:FindFirstChild(DropDownValues.Target.Player).Character)  
		end
	end    
})

TargetTab:AddSection({Name = "Target Others"})

TargetTab:AddButton({	
	Name = '<font color="#ffffff">Disable Grab </font> <font color="#2bff32">[OTHERS]</font>',
	Callback = function()
		for _, p in ipairs(game.Players:GetPlayers()) do
			if p ~= plr and p.Character and p.Character:FindFirstChild("GrabbingScript") then
				PreFunctions.Destroy(p.Character.GrabbingScript)  
			end
		end
	end    
})
TargetTab:AddButton({	
	Name = '<font color="#ffffff">kill </font> <font color="#2bff32">[OTHERS]</font>',
	Callback = function()
		for _, p in ipairs(game.Players:GetPlayers()) do
			if p ~= plr and p.Character and p.Character:FindFirstChild("Torso") then
				PreFunctions.Destroy(p.Character.Torso)  
			end
		end
	end    
})
TargetTab:AddButton({	
	Name = '<font color="#ffffff">Kick </font> <font color="#2bff32">[OTHERS]</font>',
	Callback = function()
		for _, p in ipairs(game.Players:GetPlayers()) do
			if p ~= plr then
			PreFunctions.Destroy(p)  
				OrionLib:MakeNotification({
					Name = "Kicked"..p.Name,
					Content = "This player was successfully kicked from the server",
					Image = "rbxassetid://11419701598",
					Time = 3
				})
				wait(0.01)
			end
		end
	end    
})

--SERVER TAB

ServerTab:AddSection({Name = "Destroy Parts"})

ServerTab:AddDropdown({
	Name = "MapPart",
	Default = "...",
	Options ={"Play Ground","Trees & Cactus","Moss","Dirt","Rocks","Everything"},
	Callback = function(Value)
		DropDownValues.Server.MapPart = Value
	end    
})
ServerTab:AddButton({	
	Name = "Destroy Map Part",
	Callback = function()
		local Value = DropDownValues.Server.MapPart
		if Value == "Play Ground" then
			PreFunctions.Destroy(workspace.Map.PlayGround)  
		elseif Value == "Trees & Cactus" then
			PreFunctions.Destroy(workspace.TallTrees)
			PreFunctions.Destroy(workspace.Cactuses)
		elseif Value == "Moss" then
			PreFunctions.Destroy(workspace.Map.Floor1.Layer1)
		elseif Value == "Dirt" then
			for _, Part in ipairs(workspace.Map.Floor1:GetChildren()) do
				if Part.Name == "Dirt" then
					PreFunctions.Destroy(Part)
				end
			end
		elseif Value == "Rocks" then
			for _, Part in ipairs(workspace.Map.Floor1:GetChildren()) do
				if Part.Name == "Rock" then
					PreFunctions.Destroy(Part)
				end
			end
		elseif Value == "Everything" then
			PreFunctions.Destroy(workspace.Map)
		elseif Value == "Slots" then
			PreFunctions.Destroy(workspace.Slots)
		end
	end    
})

ServerTab:AddButton({	
	Name = "Destroy Toys",
	Callback = function()
		PreFunctions.Destroy(workspace.Spawners)
	end    
})

ServerTab:AddSection({Name = "Break Stuff"})

ServerTab:AddButton({	
	Name = "Break Ragdoll",
	Callback = function()
		for _, BallSocketConstraint in ipairs(game:GetDescendants()) do
			if BallSocketConstraint:IsA("BallSocketConstraint") then
				PreFunctions.Destroy(BallSocketConstraint)
			end
		end
	end    
})
ServerTab:AddButton({	
	Name = "Break Lighting",
	Callback = function()
		PreFunctions.Destroy(game.Lighting:FindFirstChild("Deep Blue Sky"))
		PreFunctions.Destroy(game.Lighting.ColorCorrection)
	end    
})

game.Players.PlayerAdded:Connect(function(player)
	TargetList_Dropdown:Refresh(PreFunctions.GetPlayers(false,true),true)
end)
game.Players.PlayerRemoving:Connect(function(player)
	TargetList_Dropdown:Refresh(PreFunctions.GetPlayers(false,true),true)
end)

game:GetService("RunService").RenderStepped:Connect(function()
	if plr.Character and plr.Character:FindFirstChild("Humanoid") then
		if ToggleValues.Player.WalkSpeed == true then
			plr.Character.Humanoid.WalkSpeed = SliderValues.Player.Speed
		else
			plr.Character.Humanoid.WalkSpeed = 16
		end
	end
end)

if plr.Name == "ProToons_Alt" then
	BetaTab:AddButton({	
		Name = "Spawn Toy",
		Callback = function()
			Events.SpawnToyRemoteFunction:InvokeServer("GlassBox", workspace.CurrentCamera.CFrame, 15, nil, 1)
		end    
	})
end
